{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, Superwall handles all subscription-related logic. However, if you’re using RevenueCat, or you just want more control, you can return a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/PurchaseController"},{"type":"text","text":" when configuring the SDK via"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall\/configure(apiKey:purchaseController:options:completion:)-52tke"},{"type":"text","text":". In addition, you can customise aspects of the SDK by passing in a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/SuperwallOptions"},{"type":"text","text":" object on configure."}]},{"anchor":"Creating-a-Purchase-Controller","level":2,"type":"heading","text":"Creating a Purchase Controller"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A purchase controller handles purchasing and restoring via protocol methods that you implement. You pass in your purchase controller when configuring the SDK:"}]},{"type":"codeListing","syntax":"swift","code":["import SuperwallKit","","final class SuperwallService {","  private static let apiKey = \"MYAPIKEY\" \/\/ Replace this with your API Key","  static let shared = SuperwallService()","","  static func initialize() {","    Superwall.configure(","      apiKey: apiKey,","      purchaseController: shared","    )","  }","}","","\/\/ MARK: - PurchaseController","extension SuperwallService: PurchaseController {","  \/\/ 1","  func purchase(product: SKProduct) async -> PurchaseResult {","    \/\/ TODO: Purchase the product here and return its result.","    return .cancelled","  }","","  \/\/ 2","  func restorePurchases() async -> Bool {","    \/\/ TODO: Restore purchases and call completion block with boolean indicating","    \/\/ the success status of restoration.","    return false","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"All methods of the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/PurchaseController"},{"type":"text","text":" are mandatory and receive callbacks from the SDK in response to certain events that happen on the paywall. It is up to you to fill these methods with the appropriate code. Here’s what each method is responsible for:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Purchasing a given product. In here, enter your code that you use to purchase a product. If you’re using RevenueCat, you "},{"type":"emphasis","inlineContent":[{"type":"text","text":"can"}]},{"type":"text","text":" use StoreKit2 but it’s recommended not to. Then, handle the result by returning a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/PurchaseResult"},{"type":"text","text":". This is an enum that contains the following cases, all of which must be handled. Check out our example apps for further information about handling these cases:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":".cancelled"},{"type":"text","text":": The purchase was cancelled."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":".purchased"},{"type":"text","text":": The product was purchased."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":".pending"},{"type":"text","text":": The purchase is pending and requires action from the developer."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":".failed(Error)"},{"type":"text","text":": The purchase failed for a reason other than the user cancelling or the payment pending."}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Restoring purchases. Make sure to call the completion block after you attempt to restore purchases to let the SDK know whether the restoration was successful or not."}]}]}]},{"anchor":"Setting-User-Subscription-Status","level":2,"type":"heading","text":"Setting User Subscription Status"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In addition to providing a "},{"type":"codeVoice","code":"PurchaseController"},{"type":"text","text":", you need to tell the SDK the user’s subscription status every time it changes. To do this, you need to set "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall\/subscriptionStatus"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":null,"code":["  Superwall.shared.subscriptionStatus = .active"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"or"}]},{"type":"codeListing","syntax":null,"code":["  Superwall.shared.subscriptionStatus = .inactive"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This is a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/SubscriptionStatus"},{"type":"text","text":" enum that has three possible cases:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"codeVoice","code":".unknown"}]},{"type":"text","text":": This is the default value. In this state, paywalls will not show until the state changes to "},{"type":"codeVoice","code":".active"},{"type":"text","text":" or "},{"type":"codeVoice","code":".inactive"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"codeVoice","code":".active"}]},{"type":"text","text":": Indicates that the user has an active subscription. Paywalls will not show in this state (unless you specifically set the paywall to ignore subscription status)."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"codeVoice","code":".inactive"}]},{"type":"text","text":": Indicates that the user doesn’t have an active subscription."}]}]}]},{"anchor":"Passing-in-Superwall-Options","level":2,"type":"heading","text":"Passing in Superwall Options"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When configuring the SDK you can pass in options that configure Superwall, the paywall presentation, and its appearance. Take a look at "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/SuperwallOptions"},{"type":"text","text":" for all possible values."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/superwallkit\/advancedconfiguration"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/AdvancedConfiguration","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Use options and custom subscription-related logic for more control over the SDK."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Advanced Configuration","role":"article","modules":[{"name":"SuperwallKit"}]},"hierarchy":{"paths":[["doc:\/\/SuperwallKit\/documentation\/SuperwallKit"],["doc:\/\/SuperwallKit\/documentation\/SuperwallKit","doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall"]]},"seeAlsoSections":[{"title":"Essentials","identifiers":["doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Ecosystem","doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/GettingStarted","doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/TrackingEvents","doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall","doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/SuperwallOptions"],"generated":true}],"references":{"doc://SuperwallKit/documentation/SuperwallKit/GettingStarted":{"role":"collectionGroup","title":"Getting Started with Superwall","abstract":[{"type":"text","text":"Configuring the SDK."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/GettingStarted","kind":"article","type":"topic","url":"\/documentation\/superwallkit\/gettingstarted"},"doc://SuperwallKit/documentation/SuperwallKit/Superwall/subscriptionStatus":{"role":"symbol","title":"subscriptionStatus","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"subscriptionStatus"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SubscriptionStatus","preciseIdentifier":"c:@M@SuperwallKit@E@SWKSubscriptionStatus"}],"abstract":[{"type":"text","text":"A published property that indicates the subscription status of the user."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall\/subscriptionStatus","kind":"symbol","type":"topic","url":"\/documentation\/superwallkit\/superwall\/subscriptionstatus"},"https://superwall.com":{"title":"Superwall","titleInlineContent":[{"type":"text","text":"Superwall"}],"type":"link","identifier":"https:\/\/superwall.com","url":"https:\/\/superwall.com"},"doc://SuperwallKit/documentation/SuperwallKit/SuperwallOptions":{"role":"symbol","title":"SuperwallOptions","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"SuperwallOptions"}],"abstract":[{"type":"text","text":"Options for configuring Superwall, including paywall presentation and appearance."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/SuperwallOptions","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SuperwallOptions"}],"url":"\/documentation\/superwallkit\/superwalloptions"},"doc://SuperwallKit/documentation/SuperwallKit/PurchaseController":{"role":"symbol","title":"PurchaseController","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"PurchaseController"}],"abstract":[{"type":"text","text":"The protocol that handles Superwall’s subscription-related logic."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/PurchaseController","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PurchaseController"}],"url":"\/documentation\/superwallkit\/purchasecontroller"},"doc://SuperwallKit/documentation/SuperwallKit/Ecosystem":{"role":"article","title":"Understanding How Superwall Works","abstract":[{"type":"text","text":"An overview of how Superwall works in relation to your app."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Ecosystem","kind":"article","type":"topic","url":"\/documentation\/superwallkit\/ecosystem"},"doc://SuperwallKit/documentation/SuperwallKit/TrackingEvents":{"role":"article","title":"Tracking Events","abstract":[{"type":"text","text":"Show a paywall in your app in response to a tracked event."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/TrackingEvents","kind":"article","type":"topic","url":"\/documentation\/superwallkit\/trackingevents"},"doc://SuperwallKit/documentation/SuperwallKit/Superwall/configure(apiKey:purchaseController:options:completion:)-52tke":{"role":"symbol","title":"configure(apiKey:purchaseController:options:completion:)","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"configure"},{"kind":"text","text":"("},{"kind":"externalParam","text":"apiKey"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"purchaseController"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"PurchaseController","preciseIdentifier":"s:12SuperwallKit18PurchaseControllerP"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"options"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SuperwallOptions","preciseIdentifier":"c:@M@SuperwallKit@objc(cs)SWKSuperwallOptions"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"completion"},{"kind":"text","text":": (() -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")?) -> "},{"kind":"typeIdentifier","text":"Superwall","preciseIdentifier":"c:@M@SuperwallKit@objc(cs)Superwall"}],"abstract":[{"type":"text","text":"Configures a shared instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall"},{"type":"text","text":" for use throughout your app."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall\/configure(apiKey:purchaseController:options:completion:)-52tke","kind":"symbol","type":"topic","url":"\/documentation\/superwallkit\/superwall\/configure(apikey:purchasecontroller:options:completion:)-52tke"},"doc://SuperwallKit/documentation/SuperwallKit/PurchaseResult":{"role":"symbol","title":"PurchaseResult","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"PurchaseResult"}],"abstract":[{"type":"text","text":"An enum that defines the possible outcomes of attempting to purchase a product."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/PurchaseResult","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PurchaseResult"}],"url":"\/documentation\/superwallkit\/purchaseresult"},"doc://SuperwallKit/documentation/SuperwallKit/SubscriptionStatus":{"role":"symbol","title":"SubscriptionStatus","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"SubscriptionStatus"}],"abstract":[{"type":"text","text":"An enum representing the subscription status of the user."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/SubscriptionStatus","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SubscriptionStatus"}],"url":"\/documentation\/superwallkit\/subscriptionstatus"},"doc://SuperwallKit/documentation/SuperwallKit":{"role":"collection","title":"SuperwallKit","abstract":[{"type":"text","text":"The client SDK for "},{"type":"reference","isActive":true,"identifier":"https:\/\/superwall.com"},{"type":"text","text":", a service that lets you remotely configure, present and iterate paywalls – helping you find winners quickly."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit","kind":"symbol","type":"topic","url":"\/documentation\/superwallkit"},"doc://SuperwallKit/documentation/SuperwallKit/Superwall":{"role":"symbol","title":"Superwall","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Superwall"}],"abstract":[{"type":"text","text":"The primary class for integrating Superwall into your application. After configuring via"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall\/configure(apiKey:purchaseController:options:completion:)-52tke"},{"type":"text","text":", It provides access to"},{"type":"text","text":" "},{"type":"text","text":"all its featured via instance functions and variables."}],"identifier":"doc:\/\/SuperwallKit\/documentation\/SuperwallKit\/Superwall","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Superwall"}],"url":"\/documentation\/superwallkit\/superwall"}}}